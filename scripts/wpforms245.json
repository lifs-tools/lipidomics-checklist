{"fields":{"8":{"id":"8","type":"pagebreak","position":"top","indicator":"progress","indicator_color":"#72b239","title":"Overall study design","nav_align":"left","css":""},"145":{"id":"145","type":"text","label":"Title of the study","description":"","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":""},"196":{"id":"196","type":"text","label":"Principle investigator","description":"Please specify the person \/ laboratory responsible for the data acquisition.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":""},"197":{"id":"197","type":"text","label":"Institution","description":"Please specify the institution where the data was acquired.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":""},"200":{"id":"200","type":"email","label":"Corresponding Email","description":"To whom correspondence should be addressed?","required":"1","size":"medium","placeholder":"","confirmation_placeholder":"","default_value":false,"filter_type":"","allowlist":"","denylist":"","css":""},"156":{"id":"156","type":"hidden","label":"WorkflowType","label_disable":"1","default_value":"di","css":""},"3":{"id":"3","type":"select","label":"Is the workflow targeted or untargeted?","choices":{"1":{"default":"1","label":"Targeted","value":"","image":""},"2":{"label":"Untargeted","value":"","image":""}},"description":"","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"6":{"id":"6","type":"select","label":"Clinical","choices":{"1":{"default":"1","label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"Is it clinical lipidomics, i.e. samples were analyzed related to a clinical question using a quantitative, validated method?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"7":{"id":"7","type":"pagebreak","position":"","title":"Preanalytics \/ Sample Material","next":"Next","prev":"","css":""},"148":{"id":"148","type":"html","name":"Sample types","code":"<label class=\"wpforms-field-label\">Sample types<\/label>\r\n<div id=\"grey_background\" style=\"top: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 110; background-color: rgba(0, 0, 0, 0.4); display: none;\"><\/div>\r\n<div id=\"sample_selector_wrapper\" style=\"top: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 120; display: none;\">\r\n    <div id=\"sample_selector_wrapper\" style=\"top: 15%; left: 25%; width: 50%; height: 70%; position: fixed; background: white; border-radius: 5px;\">\r\n        <div id=\"control-buttons-sample\" style=\"width: 100%; height: 100%; position: relative;\">\r\n            <table style=\"width: 100%; height: 100%; border: 1px solid black;\" cellpadding=\"10px\" id=\"table_wrapper\">\r\n                <tr><td style=\"width: 100%;\"><b style=\"font-size: 20px;\">Registered sample types to workflows<\/b><\/td><\/tr>\r\n                <tr><td style=\"width: 100%; height: 80%;\" valign=\"top\" align=\"center\">\r\n                    <div id=\"sample_forms_table\" style=\"overflow-y: auto;\"><\/div>\r\n                <\/td><\/tr>\r\n                <tr><td align=\"right\" valign=\"bottom\">\r\n                    <div style=\"padding: 10px 15px; font-size: 1em; color: #333; font-family: Arial; background-color: #eee; cursor: pointer; display: inline; border: 1px solid #ddd; border-radius: 3px;\" onmouseover=\"this.style.backgroundColor = '#ddd';\" onmouseleave=\"this.style.backgroundColor = '#eee';\" onclick=\"select_sample_selector();\">Select<\/div>&nbsp;&nbsp;\r\n                    <div style=\"padding: 10px 15px; font-size: 1em; color: #333; font-family: Arial; background-color: #eee; cursor: pointer; display: inline; border: 1px solid #ddd; border-radius: 3px;\" onmouseover=\"this.style.backgroundColor = '#ddd';\" onmouseleave=\"this.style.backgroundColor = '#eee';\" onclick=\"close_sample_selector();\">Cancel<\/div>\r\n                <\/td><\/tr>\r\n            <\/table>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<div style=\"display: inline-block;\">\r\n    <div id=\"new_sample_form\" style=\"cursor: pointer; color: #0000ff; display: inline-block;\" onclick=\"register_new_sample_form(update_interval_sample);\">Add sample type<\/div>&nbsp;&nbsp;\/&nbsp;&nbsp;\r\n    <div id=\"new_sample_form\" style=\"cursor: pointer; color: #0000ff; display: inline-block;\" onclick=\"show_sample_selector(update_interval_sample);\">Load registered sample<\/div>\r\n<\/div>\r\n<div id=\"result_box_samples\"><\/div>\r\n<script language=\"javascript\">\r\nvar has_partial_sample = false;\r\n\r\nwindow.addEventListener('resize', function(event) {\r\n    document.getElementById(\"sample_forms_table\").style.height = String(document.getElementById(\"control-buttons-sample\").clientHeight * 0.75) + \"px\";\r\n}, true);\r\n\r\n\r\nfunction show_sample_selector(update_interval_sample){\r\n    update_load_sample_forms(update_interval_sample);\r\n    document.getElementById(\"grey_background\").style.display = \"block\";\r\n    document.getElementById(\"sample_selector_wrapper\").style.display = \"block\";\r\n    document.getElementById(\"sample_forms_table\").style.height = String(document.getElementById(\"control-buttons-sample\").clientHeight * 0.75) + \"px\";\r\n}\r\n\r\n\r\n\r\nfunction get_entry_id(){\r\n    var dom = document.getElementsByClassName(\"wpforms-validate wpforms-form wpforms-ajax-form\")[0];\r\n    return dom[\"action\"].split(\"wpforms_resume_entry=\")[1];\r\n}\r\n\r\n\r\n\r\nfunction update_load_sample_forms(update_interval_sample){\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    document.getElementById(\"sample_forms_table\").innerHTML = \"\";\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            has_partial_sample = false;\r\n            response_text = xmlhttp_request.responseText;\r\n            var innerHTML = \"\";\r\n            var post = 1;\r\n            if (response_text.length > 0){\r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    console.log(\"Error\");\r\n                    clearInterval(update_interval_sample);\r\n                }\r\n                else {\r\n                    var response = JSON.parse(response_text);\r\n                    innerHTML += \"<table cellspacing='0' cellpadding='10' style='width: 100%'>\";\r\n                    innerHTML += \"<tr><th style='width: 3%; border-bottom: 3px solid black;'>&nbsp;<\/th>\";\r\n                    innerHTML += \"<th style='width: 90%; border-bottom: 3px solid black;'>Sample<\/th>\";\r\n                    innerHTML += \"<th style='border-bottom: 3px solid black;'>Selection<\/th><\/tr>\";\r\n                    \r\n                    response.sort(function(a, b){\r\n                        return a[\"title\"] > b[\"title\"];\r\n                    });\r\n                    \r\n                    for (var i = 0; i < response.length; ++i){\r\n                        var row = response[i];\r\n                        if (!(\"title\" in row)){\r\n                            echo(\"Error\");\r\n                            return;\r\n                        }\r\n                        \r\n                        innerHTML += \"<tr><td>\" + String(post++) + \") <\/td>\";\r\n                        innerHTML += \"<td>\" + row[\"title\"] + \"<\/td>\";\r\n                        innerHTML += \"<td><input type='checkbox' id='\" + row[\"enc_entry\"] + \"' class='check_sample'><\/input><\/td>\";\r\n                        innerHTML += \"<\/tr>\";\r\n                    }\r\n                    \r\n                    \r\n                    innerHTML += \"<\/table>\";\r\n                }\r\n            }\r\n            document.getElementById(\"sample_forms_table\").innerHTML = innerHTML;\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=get_all_sample_forms\";\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction select_sample_selector(){\r\n    close_sample_selector();\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry_id();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval_sample);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    \r\n    var checked_entries = document.getElementsByClassName(\"check_sample\");\r\n    var sample_entry_ids = [];\r\n    for (var i = 0; i < checked_entries.length; ++i){\r\n        var dom = checked_entries[i];\r\n        if (dom.checked){\r\n            sample_entry_ids.push(dom.id);\r\n        }\r\n    }\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            has_partial_sample = false;\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    console.log(\"Error\");\r\n                    clearInterval(update_interval_sample);\r\n                }\r\n                else {\r\n                    update_sample_forms(update_interval_sample);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=import_sample_forms&entry_id=\" + entry_id + \"&sample_entry_ids=\" + sample_entry_ids.join(\"|\");\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction close_sample_selector(){\r\n    document.getElementById(\"grey_background\").style.display = \"none\";\r\n    document.getElementById(\"sample_selector_wrapper\").style.display = \"none\";\r\n}\r\n\r\n\r\nfunction update_sample_forms() {\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry_id();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval_sample);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            var innerHTML = \"\";\r\n            var post = 1;\r\n            \r\n            if (response_text.length > 0){\r\n                \r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    clearInterval(update_interval_sample);\r\n                }\r\n                else {\r\n                    has_partial_sample = false;\r\n                    var response = JSON.parse(response_text);\r\n                    innerHTML += \"<table cellspacing='0' cellpadding='10' style='width: 100%'>\";\r\n                    innerHTML += \"<tr><th style='width: 3%;'>&nbsp;<\/th>\";\r\n                    innerHTML += \"<th style='width: 70%;'>Sample set name \/ Sample type <\/th>\";\r\n                    innerHTML += \"<th style='width: 11%;'>Status<\/th>\";\r\n                    innerHTML += \"<th style='width: 11%;'>Action<\/th>\";\r\n                    innerHTML += \"<th style='width: 5%;'>&nbsp;<\/th><\/tr>\";\r\n                    \r\n                    response.sort(function(a, b){\r\n                        return b[\"date_modified\"] - a[\"date_modified\"];\r\n                    });\r\n                    for (var i = 0; i < response.length; ++i){\r\n                        var row = response[i];\r\n                        if (!(\"link\" in row) || !(\"title\" in row) || !(\"status\" in row)){\r\n                            echo(\"Error\");\r\n                            return;\r\n                        }\r\n                        \r\n                        var date_mod = new Date(row[\"date_modified\"] * 1000);\r\n                        innerHTML += \"<tr><td>\" + String(post++) + \") <\/td>\";\r\n                        innerHTML += \"<td>\" + row[\"title\"] + \"<\/td><td>\" + row[\"status\"] + \"<\/td>\";\r\n                        if (row[\"status\"] == \"partial\"){\r\n                            has_partial_sample = true;\r\n                            innerHTML += \"<td><a href='\" + row[\"link\"] + \"' target='_blank'>Continue<\/a><\/td>\";\r\n                        }\r\n                        else {\r\n                            innerHTML += \"<td alt='Copy sample type form'><a style='display: inline; cursor: pointer;' onclick='copy_sample_form(\" + update_interval_sample + \", \" + '\"' + row[\"enc_entry\"] + '\"' + \");' \/>Copy form<\/a><\/td>\";\r\n                        }\r\n                        innerHTML += \"<td align='center' alt='Delete sample type'><img src='\/lipidomics-report\/trashbin.png' style='cursor: pointer; height: 18px;' onclick='delete_sample_form(\" + update_interval_sample + \", \" + '\"' + row[\"title\"] + '\"' + \", \" + '\"' + row[\"enc_entry\"] + '\"' + \");' \/><\/td>\";\r\n                        innerHTML += \"<\/tr>\";\r\n                    }\r\n\r\n                    innerHTML += \"<\/table>\";\r\n                }\r\n            }\r\n            try {\r\n                document.getElementById(\"result_box_samples\").innerHTML = innerHTML;\r\n                document.getElementsByName(\"wpforms[submit]\")[0].disabled = has_partial | has_partial_sample;\r\n            }\r\n            catch (e){\r\n            }\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=get_sample_forms&main_entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction delete_sample_form(update_interval_sample, sample_type, entry_id){\r\n    if (!confirm(\"Do you really want to delete '\" + sample_type + \"' type?\")) return;\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (!response_text.startsWith(\"ErrorCodes\")){\r\n                    update_sample_forms(update_interval_sample);\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=delete_sample_form&entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\nvar update_interval_sample = 0;\r\nasync function start_interval(update_interval_sample){\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    update_interval_sample = setInterval(update_sample_forms, 3000);\r\n    update_sample_forms(update_interval_sample);\r\n}\r\nstart_interval(update_interval_sample);\r\n\r\n\r\n\r\n\r\nfunction copy_sample_form(update_interval_sample, entry_id){\r\n    if (typeof(has_partial_sample) != undefined && has_partial_sample) {\r\n        window.alert(\"Only one partial sample type can be open at the same time.\");\r\n        return;\r\n    }\r\n    \r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0 && !response_text.startsWith(\"ErrorCodes\")){\r\n                update_sample_forms(update_interval_sample);\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=copy_sample_form&entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\n\r\n\r\nfunction register_new_sample_form(update_interval_sample){\r\n    if (typeof(has_partial_sample) != undefined && has_partial_sample) {\r\n        window.alert(\"Only one partial sample type can be open at the same time.\");\r\n        return;\r\n    }\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry_id();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval_sample);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (!response_text.startsWith(\"ErrorCodes\")){\r\n                    update_sample_forms(update_interval_sample);\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=add_sample_form&main_entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n<\/script>\r\n","label_disable":"1","css":""},"33":{"id":"33","type":"pagebreak","position":"","title":"Lipid extraction","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"38":{"id":"38","type":"select","label":"Extraction method","choices":{"1":{"default":"1","label":"1-phase system","value":"","image":""},"2":{"label":"2-phase system","value":"","image":""},"3":{"label":"Solid-Phase Extraction","value":"","image":""},"4":{"label":"Other","value":"","image":""}},"description":"Which type of lipid extraction was applied?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"!=","value":"img"}]]},"39":{"id":"39","type":"text","label":"Other extraction method","description":"Which other extraction method was applied?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"38","operator":"==","value":"4"}]]},"40":{"id":"40","type":"select","label":"pH adjustment","choices":{"1":{"default":"1","label":"None","value":"","image":""},"2":{"label":"Hydrochloric acid","value":"","image":""},"3":{"label":"Citrate","value":"","image":""},"4":{"label":"Ammonium formate","value":"","image":""}},"description":"Was the pH adjusted for extraction? If yes, which buffer, acid\/base was added?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"!=","value":"img"}]]},"42":{"id":"42","type":"select","label":"1-phase system","choices":{"1":{"default":"1","label":"Acetonitrile","value":"","image":""},"2":{"label":"Isopropanol","value":"","image":""},"3":{"label":"Methanol","value":"","image":""},"5":{"label":"Ethanol","value":"","image":""},"7":{"label":"Butanol","value":"","image":""},"6":{"label":"Butanol\/Methanol (1\/1)","value":"","image":""},"9":{"label":"Butanol\/Methanol (3\/1)","value":"","image":""},"4":{"label":"Other","value":"","image":""}},"description":"Type of 1-phase, i.e. organic solvent used for protein precipitation.","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"38","operator":"==","value":"1"}]]},"157":{"id":"157","type":"text","label":"Other 1-phase system","description":"Which other type 1-phase was used for protein precipitation?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"42","operator":"==","value":"4"}]]},"43":{"id":"43","type":"select","label":"2-phase system","choices":{"1":{"default":"1","label":"Folch","value":"","image":""},"2":{"label":"Bligh&Dyer","value":"","image":""},"3":{"label":"MTBE","value":"","image":""},"5":{"label":"BUME","value":"","image":""},"4":{"label":"2-step extraction","value":"","image":""},"6":{"label":"Other","value":"","image":""}},"description":"Type of 2-phase; for other include reference when available.","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"38","operator":"==","value":"2"}]]},"159":{"id":"159","type":"text","label":"Other 2-phase system","description":"Which other type 2-phase was used?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"43","operator":"==","value":"6"}]]},"41":{"id":"41","type":"select","label":"Solid-Phase Extraction","choices":{"1":{"default":"1","label":"Reverse-Phase","value":"","image":""},"2":{"label":"Normal-Phase","value":"","image":""},"3":{"label":"Ion Exchange","value":"","image":""},"5":{"label":"Mixed Mode","value":"","image":""},"4":{"label":"Other","value":"","image":""}},"description":"Separation mode applied for SPE.","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"38","operator":"==","value":"3"}]]},"195":{"id":"195","type":"text","label":"Other Solid-Phase Extraction","description":"Which other solid-phase extraction was applied?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"41","operator":"==","value":"4"}]]},"44":{"id":"44","type":"select","label":"Were internal standards added prior extraction?","choices":{"1":{"default":"1","label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"45":{"id":"45","type":"pagebreak","position":"","title":"Analytical platform","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"163":{"id":"163","type":"select","label":"Number of separation dimensions","choices":{"1":{"label":"One dimension","value":"","image":""},"2":{"label":"Two dimensions","value":"","image":""},"3":{"label":"Three dimensions","value":"","image":""}},"description":"How many dimensions were applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"164":{"id":"164","type":"select","label":"Separation Type 1","choices":{"1":{"label":"GC","value":"","image":""},"2":{"default":"1","label":"LC","value":"","image":""},"3":{"label":"SFC","value":"","image":""},"4":{"label":"TLC","value":"","image":""}},"description":"Which type of separation was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"165":{"id":"165","type":"select","label":"Separation Mode 1","choices":{"1":{"label":"NP","value":"","image":""},"2":{"label":"HILIC","value":"","image":""},"3":{"label":"RP","value":"","image":""}},"description":"Which separation mode was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"166":{"id":"166","type":"number","label":"Separation window (1) for lipid analyte selection (\u00b1) in minutes","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"167":{"id":"167","type":"select","label":"Separation Type 2","choices":{"1":{"label":"GC","value":"","image":""},"2":{"label":"LC","value":"","image":""},"3":{"label":"SFC","value":"","image":""},"4":{"label":"TLC","value":"","image":""}},"description":"Which type of separation was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"163","operator":"==","value":"2"}],[{"field":"163","operator":"==","value":"3"}]]},"168":{"id":"168","type":"select","label":"Separation Mode 2","choices":{"1":{"label":"NP","value":"","image":""},"2":{"label":"HILIC","value":"","image":""},"3":{"label":"RP","value":"","image":""}},"description":"Which separation mode was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"163","operator":"==","value":"2"}],[{"field":"163","operator":"==","value":"3"}]]},"169":{"id":"169","type":"number","label":"Separation window (2) for lipid analyte selection (\u00b1) in minutes","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"163","operator":"==","value":"2"}],[{"field":"163","operator":"==","value":"3"}]]},"170":{"id":"170","type":"select","label":"Separation Type 3","choices":{"1":{"label":"GC","value":"","image":""},"2":{"label":"LC","value":"","image":""},"3":{"label":"SFC","value":"","image":""},"4":{"label":"TLC","value":"","image":""}},"description":"Which type of separation was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":{"1":[{"field":"163","operator":"==","value":"3"}]}},"171":{"id":"171","type":"select","label":"Separation Mode 3","choices":{"1":{"label":"NP","value":"","image":""},"2":{"label":"HILIC","value":"","image":""},"3":{"label":"RP","value":"","image":""}},"description":"Which separation mode was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":{"1":[{"field":"163","operator":"==","value":"3"}]}},"172":{"id":"172","type":"number","label":"Separation window (3) for lipid analyte selection (\u00b1) in minutes","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":{"1":[{"field":"163","operator":"==","value":"3"}]}},"173":{"id":"173","type":"select","label":"RT verified by standard","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"Were standards used to check retention time of lipid class(species)?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"174":{"id":"174","type":"select","label":"CCS verified by standard","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"Were standards used to check CCS values?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"175":{"id":"175","type":"select","label":"Separation of isobaric\/isomeric interferece confirmed","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"Was separation of isobaric\/isomeric interferece confirmed by primary standards?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"176":{"id":"176","type":"select","label":"Model for separation prediction","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"label":"No","value":"","image":""}},"description":"Was a a model used to predict lipid molecule separation?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"sep"}]]},"160":{"id":"160","type":"select","label":"MS type","choices":{"6":{"label":"Q","value":"","image":""},"7":{"label":"TOF","value":"","image":""},"8":{"label":"QQQ","value":"","image":""},"9":{"label":"QTrap","value":"","image":""},"10":{"label":"FTICR","value":"","image":""},"3":{"label":"Orbitrap","value":"","image":""},"2":{"label":"QTOF","value":"","image":""},"11":{"label":"FTICR","value":"","image":""},"4":{"label":"ICR","value":"","image":""},"5":{"label":"Other","value":"","image":""}},"description":"","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"60":{"id":"60","type":"text","label":"Other MS type","description":"Specify another MS type.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"160","operator":"==","value":"5"}]]},"161":{"id":"161","type":"select","label":"MS vendor","choices":{"1":{"label":"Agilent","value":"","image":""},"2":{"label":"Bruker","value":"","image":""},"3":{"label":"SCIEX","value":"","image":""},"6":{"label":"Shimadzu","value":"","image":""},"5":{"label":"Thermo","value":"","image":""},"4":{"label":"Waters","value":"","image":""},"7":{"label":"Other","value":"","image":""}},"description":"Vendor of mass spectrometer.","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"62":{"id":"62","type":"text","label":"Other MS vendor","description":"Specify another MS vendor.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"161","operator":"==","value":"7"}]]},"162":{"id":"162","type":"select","label":"Ion source","choices":{"1":{"label":"ESI","value":"","image":""},"2":{"label":"APCI","value":"","image":""},"3":{"label":"APPI","value":"","image":""},"4":{"label":"MALDI","value":"","image":""},"5":{"label":"Other","value":"","image":""}},"description":"Which ion source was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"64":{"id":"64","type":"text","label":"Other ion source","description":"Specify another ion source.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"162","operator":"==","value":"5"}]]},"49":{"id":"49","type":"select","label":"Imaging ion source","choices":{"1":{"label":"MALDI","value":"","image":""},"2":{"label":"DESI","value":"","image":""},"3":{"label":"Other","value":"","image":""}},"description":"Which ion source was applied?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"img"}]]},"57":{"id":"57","type":"text","label":"Other imaging ion source","description":"Specify another imaging ion source.","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"49","operator":"==","value":"3"}]]},"193":{"id":"193","type":"select","label":"Direct type","choices":{"1":{"label":"Syringe","value":"","image":""},"2":{"label":"FIA","value":"","image":""},"3":{"label":"Chip","value":"","image":""}},"description":"Which inlet was used for direct MS?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"156","operator":"==","value":"di"}]]},"177":{"id":"177","type":"checkbox","label":"MS Level","choices":{"1":{"label":"MS1","value":"","image":""},"3":{"label":"MS2","value":"","image":""},"2":{"label":"MSn","value":"","image":""}},"description":"Which MS level(s) was(were) used for identification?","required":"1","choices_images_style":"modern","input_columns":"","choice_limit":"","dynamic_choices":"","css":""},"181":{"id":"181","type":"select","label":"Mass resolution for detected ion at MS1","choices":{"1":{"label":"Low resolution","value":"","image":""},"2":{"label":"High resolution","value":"","image":""}},"description":"Which mass resolution was applied for the detected ion?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"1"}]]},"182":{"id":"182","type":"number","label":"Resolution in Da at MS1","description":"Specify the total window size in Da.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"1"},{"field":"181","operator":"==","value":"1"}]]},"209":{"id":"209","type":"number","label":"Resolution at m\/z 200 at MS1","description":"Specify the resolution at m\/z 200 FWHM.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"1"},{"field":"181","operator":"==","value":"2"}]]},"184":{"id":"184","type":"number","label":"Mass accuracy in ppm at MS1","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"1"},{"field":"181","operator":"==","value":"2"}]]},"186":{"id":"186","type":"number","label":"Mass window for precursor ion isolation (in  Da total isolation window)","description":"For MS2 and higher - which mass window was applied for precursor selection?","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"2"}],[{"field":"177","operator":"==","value":"3"}]]},"202":{"id":"202","type":"select","label":"Mass resolution for detected ion at MS2","choices":{"1":{"label":"Low resolution","value":"","image":""},"2":{"label":"High resolution","value":"","image":""}},"description":"Which mass resolution was applied for the detected ion?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"3"}]]},"203":{"id":"203","type":"number","label":"Resolution in Da at MS2","description":"Specify the total window size in Da.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"3"},{"field":"202","operator":"==","value":"1"}]]},"208":{"id":"208","type":"number","label":"Resolution at m\/z 200 at MS2","description":"Specify the resolution at m\/z 200 FWHM.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"3"},{"field":"202","operator":"==","value":"2"}]]},"206":{"id":"206","type":"number","label":"Mass accuracy in ppm at MS2","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"3"},{"field":"202","operator":"==","value":"2"}]]},"187":{"id":"187","type":"select","label":"Mass resolution for detected ion at MSn","choices":{"1":{"label":"Low resolution","value":"","image":""},"2":{"label":"High resolution","value":"","image":""}},"description":"Which mass resolution was applied for the detected ion?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"2"}]]},"188":{"id":"188","type":"number","label":"Resolution in Da at MSn","description":"Specify the total window size in Da.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"2"},{"field":"187","operator":"==","value":"1"}]]},"189":{"id":"189","type":"number","label":"Resolution at m\/z 200 at MSn","description":"Specify the resolution at m\/z 200 FWHM.","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"2"},{"field":"187","operator":"==","value":"2"}]]},"192":{"id":"192","type":"number","label":"Mass accuracy in ppm at MSn","description":"","required":"1","size":"medium","placeholder":"","default_value":"","css":"","bfwpf_minnumber":"0","bfwpf_maxnumber":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"177","operator":"==","value":"2"},{"field":"187","operator":"==","value":"2"}]]},"178":{"id":"178","type":"checkbox","label":"Additional dimension\/techniques","choices":{"1":{"label":"IMS","value":"","image":""},"2":{"label":"OzID","value":"","image":""},"3":{"label":"UV-PD","value":"","image":""},"4":{"label":"Paterno-B\u00fcchi","value":"","image":""},"5":{"label":"Other","value":"","image":""}},"description":"Were additional analytical dimensions applied?","choices_images_style":"modern","input_columns":"","choice_limit":"","dynamic_choices":"","css":""},"180":{"id":"180","type":"text","label":"Other additional dimension\/techniques","description":"Which other additional dimension\/technique was used?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"178","operator":"==","value":"5"}]]},"67":{"id":"67","type":"pagebreak","position":"","title":"Lipid identification \/ Additional separation method(s) \/ Additional analytical dimension \/ Lipid Quantification","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"149":{"id":"149","type":"html","name":"Lipid Classes","code":"<label class=\"wpforms-field-label\">Lipid Classes<\/label>\r\n<div id=\"grey_background\" style=\"top: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 110; background-color: rgba(0, 0, 0, 0.4); display: none;\"><\/div>\r\n    <div id=\"class_selector_wrapper\" style=\"top: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 120; display: none;\">\r\n        <div id=\"class_selector_wrapper\" style=\"top: 15%; left: 25%; width: 50%; height: 70%; position: fixed; background: white; border-radius: 5px;\">\r\n            <div id=\"control-buttons\" style=\"width: 100%; height: 100%; position: relative;\">\r\n                <table style=\"width: 100%; height: 100%; border: 1px solid black;\" cellpadding=\"10px\" id=\"table_wrapper\">\r\n                    <tr><td style=\"width: 100%;\"><b style=\"font-size: 20px;\">Registered Lipid classes to workflows<\/b><\/td><\/tr>\r\n                    <tr><td style=\"width: 100%; height: 80%;\" valign=\"top\" align=\"center\">\r\n                        <div id=\"class_forms_table\" style=\"overflow-y: auto;\"><\/div>\r\n                    <\/td><\/tr>\r\n                    <tr><td align=\"right\" valign=\"bottom\">\r\n                        <div style=\"padding: 10px 15px; font-size: 1em; color: #333; font-family: Arial; background-color: #eee; cursor: pointer; display: inline; border: 1px solid #ddd; border-radius: 3px;\" onmouseover=\"this.style.backgroundColor = '#ddd';\" onmouseleave=\"this.style.backgroundColor = '#eee';\" onclick=\"select_class_selector();\">Select<\/div>&nbsp;&nbsp;\r\n                        <div style=\"padding: 10px 15px; font-size: 1em; color: #333; font-family: Arial; background-color: #eee; cursor: pointer; display: inline; border: 1px solid #ddd; border-radius: 3px;\" onmouseover=\"this.style.backgroundColor = '#ddd';\" onmouseleave=\"this.style.backgroundColor = '#eee';\" onclick=\"close_class_selector();\">Cancel<\/div>\r\n                    <\/td><\/tr>\r\n                <\/table>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<div style=\"display: inline-block;\">\r\n    <div id=\"new_class_form\" style=\"cursor: pointer; color: #0000ff; display: inline-block;\" onclick=\"register_new_class_form(update_interval);\">Add lipid class<\/div>&nbsp;&nbsp;\/&nbsp;&nbsp;\r\n    <div id=\"new_class_form\" style=\"cursor: pointer; color: #0000ff; display: inline-block;\" onclick=\"show_class_selector(update_interval);\">Load registered lipid classes<\/div>\r\n<\/div>\r\n<div id=\"result_box\"><\/div>\r\n<script language=\"javascript\">\r\nvar has_partial = false;\r\n\r\nwindow.addEventListener('resize', function(event) {\r\n    document.getElementById(\"class_forms_table\").style.height = String(document.getElementById(\"control-buttons\").clientHeight * 0.75) + \"px\";\r\n}, true);\r\n\r\n\r\nfunction show_class_selector(update_interval){\r\n    update_load_class_forms(update_interval);\r\n    document.getElementById(\"grey_background\").style.display = \"block\";\r\n    document.getElementById(\"class_selector_wrapper\").style.display = \"block\";\r\n    document.getElementById(\"class_forms_table\").style.height = String(document.getElementById(\"control-buttons\").clientHeight * 0.75) + \"px\";\r\n}\r\n\r\n\r\nfunction get_entry(){\r\n    var dom = document.getElementsByClassName(\"wpforms-validate wpforms-form wpforms-ajax-form\")[0];\r\n    return dom[\"action\"].split(\"wpforms_resume_entry=\")[1];\r\n}\r\n\r\n\r\nfunction update_load_class_forms(update_interval){\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            has_partial = false;\r\n            response_text = xmlhttp_request.responseText;\r\n            var innerHTML = \"\";\r\n            var post = 1;\r\n            if (response_text.length > 0){\r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    console.log(\"Error\");\r\n                    clearInterval(update_interval);\r\n                }\r\n                else {\r\n                    var response = JSON.parse(response_text);\r\n                    innerHTML += \"<table cellspacing='0' cellpadding='10' style='width: 100%'>\";\r\n                    innerHTML += \"<tr><th style='border-bottom: 3px solid black;'>&nbsp;<\/th>\";\r\n                    innerHTML += \"<th style='border-bottom: 3px solid black;'>Workflow title<\/th>\";\r\n                    innerHTML += \"<th style='border-bottom: 3px solid black;'>Lipid class<\/th>\";\r\n                    innerHTML += \"<th style='border-bottom: 3px solid black;'>Modification date<\/th>\";\r\n                    innerHTML += \"<th style='border-bottom: 3px solid black;'>Selection<\/th><\/tr>\";\r\n                    \r\n                    response.sort(function(a, b){\r\n                        if (a[\"main_title\"] == b[\"main_title\"]) return a[\"title\"] > b[\"title\"];\r\n                         return a[\"main_title\"] > b[\"main_title\"];\r\n                    });\r\n                    \r\n                    for (var i = 0; i < response.length; ++i){\r\n                        var row = response[i];\r\n                        if (!(\"link\" in row) || !(\"title\" in row) || !(\"status\" in row)){\r\n                            echo(\"Error\");\r\n                            return;\r\n                        }\r\n                        \r\n                        var date_mod = new Date(row[\"date_modified\"] * 1000);\r\n                        innerHTML += \"<tr><td>\" + String(post++) + \") <\/td>\";\r\n                        innerHTML += \"<td>\" + row[\"main_title\"] + \"<\/td><td>\" + row[\"title\"] + \"<\/td><td>\" + date_mod.toUTCString() + \"<\/td>\";\r\n                        innerHTML += \"<td><input type='checkbox' id='\" + row[\"enc_entry\"] + \"' class='check_class'><\/input><\/td>\";\r\n                        innerHTML += \"<\/tr>\";\r\n                    }\r\n                    \r\n                    \r\n                    innerHTML += \"<\/table>\";\r\n                }\r\n            }\r\n            document.getElementById(\"class_forms_table\").innerHTML = innerHTML;\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=get_all_class_forms&main_entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction select_class_selector(){\r\n    close_class_selector();\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    \r\n    var checked_entries = document.getElementsByClassName(\"check_class\");\r\n    var class_entry_ids = [];\r\n    for (var i = 0; i < checked_entries.length; ++i){\r\n        var dom = checked_entries[i];\r\n        if (dom.checked){\r\n            class_entry_ids.push(dom.id);\r\n        }\r\n    }\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            has_partial = false;\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    console.log(\"Error\");\r\n                    clearInterval(update_interval);\r\n                }\r\n                else {\r\n                    update_class_forms(update_interval);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=import_class_forms&entry_id=\" + entry_id + \"&class_entry_ids=\" + class_entry_ids.join(\"|\");\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction close_class_selector(){\r\n    document.getElementById(\"grey_background\").style.display = \"none\";\r\n    document.getElementById(\"class_selector_wrapper\").style.display = \"none\";\r\n}\r\n\r\n\r\nfunction update_class_forms() {\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    \r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            var innerHTML = \"\";\r\n            var post = 1;\r\n            \r\n            if (response_text.length > 0){\r\n                \r\n                if (response_text.startsWith(\"ErrorCodes\")){\r\n                    clearInterval(update_interval);\r\n                }\r\n                else {\r\n                    has_partial = false;\r\n                    var response = JSON.parse(response_text);\r\n                    innerHTML += \"<table cellspacing='0' cellpadding='10' style='width: 100%'>\";\r\n                    innerHTML += \"<tr><th style='width: 5%;'>&nbsp;<\/th>\";\r\n                    innerHTML += \"<th style='width: 20%;'>Lipid Class<\/th>\";\r\n                    innerHTML += \"<th style='width: 10%;'>Status<\/th>\";\r\n                    innerHTML += \"<th style='width: 10%;'>Action<\/th>\";\r\n                    innerHTML += \"<th style='width: 5%;'>&nbsp;<\/th><\/tr>\";\r\n                    \r\n                    response.sort(function(a, b){\r\n                        return b[\"date_modified\"] - a[\"date_modified\"];\r\n                    });\r\n                    for (var i = 0; i < response.length; ++i){\r\n                        var row = response[i];\r\n                        if (!(\"link\" in row) || !(\"title\" in row) || !(\"status\" in row)){\r\n                            echo(\"Error\");\r\n                            return;\r\n                        }\r\n                        \r\n                        var date_mod = new Date(row[\"date_modified\"] * 1000);\r\n                        innerHTML += \"<tr><td>\" + String(post++) + \") <\/td>\";\r\n                        innerHTML += \"<td>\" + row[\"title\"] + \"<\/td><td>\" + row[\"status\"] + \"<\/td>\";\r\n                        if (row[\"status\"] == \"partial\"){\r\n                            has_partial = true;\r\n                            innerHTML += \"<td><a href='\" + row[\"link\"] + \"' target='_blank'>Continue<\/a><\/td>\";\r\n                        }\r\n                        else {\r\n                            innerHTML += \"<td alt='Copy lipid class form'><a style='display: inline; cursor: pointer;' onclick='copy_class_form(\" + update_interval + \", \" + '\"' + row[\"enc_entry\"] + '\"' + \");' \/>Copy form<\/a><\/td>\";\r\n                        }\r\n                        innerHTML += \"<td align='center' alt='Delete lipid class'><img src='\/lipidomics-report\/trashbin.png' style='cursor: pointer; height: 18px;' onclick='delete_class_form(\" + update_interval + \", \" + '\"' + row[\"title\"] + '\"' + \", \" + '\"' + row[\"enc_entry\"] + '\"' + \");' \/><\/td>\";\r\n                        innerHTML += \"<\/tr>\";\r\n                    }\r\n\r\n                    innerHTML += \"<\/table>\";\r\n                }\r\n            }\r\n            try {\r\n                document.getElementById(\"result_box\").innerHTML = innerHTML;\r\n                document.getElementsByName(\"wpforms[submit]\")[0].disabled = has_partial | has_partial_sample;\r\n            }\r\n            catch (e){\r\n            }\r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=get_class_forms&main_entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\nfunction delete_class_form(update_interval, lipid_class, entry_id){\r\n    if (!confirm(\"Do you really want to delete '\" + lipid_class + \"' class?\")) return;\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (!response_text.startsWith(\"ErrorCodes\")){\r\n                    update_class_forms(update_interval);\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=delete_class_form&entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\nvar update_interval = 0;\r\nasync function start_interval(update_interval){\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    update_interval = setInterval(update_class_forms, 3000);\r\n    update_class_forms(update_interval);\r\n}\r\nstart_interval(update_interval);\r\n\r\n\r\n\r\n\r\nfunction copy_class_form(update_interval, entry_id){\r\n    if (typeof(has_partial) != undefined && has_partial) {\r\n        window.alert(\"Only one partial lipid class can be open at the same time.\");\r\n        return;\r\n    }\r\n    \r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0 && !response_text.startsWith(\"ErrorCodes\")){\r\n                update_class_forms(update_interval);\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=copy_class_form&entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n\r\n\r\n\r\n\r\nfunction register_new_class_form(update_interval){\r\n    if (typeof(has_partial) != undefined && has_partial) {\r\n        window.alert(\"Only one partial lipid class can be open at the same time.\");\r\n        return;\r\n    }\r\n    var entry_id = -1;\r\n    \r\n    try {\r\n        entry_id = get_entry();\r\n    }\r\n    catch (e){\r\n        console.log(\"Error: \" + e);\r\n        clearInterval(update_interval);\r\n        return;\r\n    }\r\n    \r\n    if (entry_id == undefined || entry_id.length == 0) return;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    \r\n    xmlhttp_request.onreadystatechange = function() {\r\n        if (xmlhttp_request.readyState == 4 && xmlhttp_request.status == 200) {\r\n            response_text = xmlhttp_request.responseText;\r\n            if (response_text.length > 0){\r\n                if (!response_text.startsWith(\"ErrorCodes\")){\r\n                    update_class_forms(update_interval);\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=add_class_form&main_entry_id=\" + entry_id;\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\n<\/script>\r\n","label_disable":"1","css":""},"128":{"id":"128","type":"pagebreak","position":"","title":"Quality control","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"129":{"id":"129","type":"select","label":"Blanks","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Where blank samples analyzed?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"194":{"id":"194","type":"checkbox","label":"Type of Blanks","choices":{"1":{"label":"Extraction blank","value":"","image":""},"2":{"label":"Injection blank","value":"","image":""}},"description":"Which types of blank samples were analyzed?","required":"1","choices_images_style":"modern","input_columns":"","choice_limit":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"129","operator":"==","value":"1"}]]},"131":{"id":"131","type":"select","label":"Quality control","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Were QC samples analyzed?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"132":{"id":"132","type":"checkbox","label":"Type of QC sample","choices":{"2":{"label":"Commercial sample","value":"","image":""},"3":{"label":"Sample pool","value":"","image":""},"4":{"label":"Reference material","value":"","image":""}},"description":"Which types of QC samples were analyzed?","required":"1","choices_images_style":"modern","input_columns":"","choice_limit":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"131","operator":"==","value":"1"}]]},"133":{"id":"133","type":"pagebreak","position":"","title":"Method qualification and validation","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"207":{"id":"207","type":"select","label":"Method validation","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was any method validation performed?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"201":{"id":"201","type":"select","label":"Lipid recovery","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was the recovery of lipid extraction evaluated?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"134":{"id":"134","type":"select","label":"Dynamic quantification range","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was the dynamic range of the method evaluated?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"137":{"id":"137","type":"select","label":"Limit of quantitation (LOQ)\/Limit of detection (LOD)","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was LOD\/LOQ of the method evaluated?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"136":{"id":"136","type":"select","label":"Precison","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was precision of the method evaluated?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"135":{"id":"135","type":"select","label":"Accuracy","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""}},"description":"Was accuracy of the method evaluated?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"138":{"id":"138","type":"select","label":"Guidelines followed","choices":{"1":{"label":"FDA","value":"","image":""},"2":{"label":"EMA","value":"","image":""},"4":{"default":"1","label":"None","value":"","image":""},"3":{"label":"Other","value":"","image":""}},"description":"Was a guideline followed for method validation?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"207","operator":"==","value":"1"}]]},"139":{"id":"139","type":"text","label":"Other guidelines followed","description":"Which other guidelines were followed?","required":"1","size":"medium","placeholder":"","limit_count":"1","limit_mode":"characters","default_value":"","input_mask":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"138","operator":"==","value":"3"}]]},"140":{"id":"140","type":"pagebreak","position":"","title":"Reporting","next":"Next","prev_toggle":"1","prev":"Previous","css":""},"141":{"id":"141","type":"select","label":"Are reported raw data uploaded into repository?","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""},"3":{"label":"Available on request","value":"","image":""}},"description":"Were reported data uploaded into repository or included as supplementary data?","required":"1","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"142":{"id":"142","type":"select","label":"Are metadata available?","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""},"3":{"label":"Available on request","value":"","image":""}},"description":"","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"141","operator":"==","value":"1"}]]},"144":{"id":"144","type":"checkbox","label":"Summary data","choices":{"1":{"label":"Quantification data","value":"","image":""},"2":{"label":"Identification data","value":"","image":""},"3":{"label":"Quantification and identification data","value":"","image":""}},"description":"Are summary, i.e. processed final data available?","choices_images_style":"modern","input_columns":"","choice_limit":"","dynamic_choices":"","css":"","conditional_logic":"1","conditional_type":"show","conditionals":[[{"field":"141","operator":"==","value":"1"}]]},"143":{"id":"143","type":"select","label":"Raw data upload","choices":{"1":{"label":"Yes","value":"","image":""},"2":{"default":"1","label":"No","value":"","image":""},"3":{"label":"Available on request","value":"","image":""}},"description":"Are raw data, i.e. unprocessed data including peak m\/z, intensities\/areas, RT (when applicable) available?","style":"classic","size":"medium","placeholder":"","dynamic_choices":"","css":""},"9":{"id":"9","type":"pagebreak","position":"bottom","prev_toggle":"1","prev":"Previous"}},"id":"245","field_id":210,"settings":{"form_title":"Lipidomics Workflow Report","form_desc":"","submit_text":"Submit","submit_text_processing":"Sending\u2026","antispam":"1","form_class":"","submit_class":"","ajax_submit":"1","notification_enable":"1","notifications":{"1":{"notification_name":"Default Notification","email":"{user_email}","subject":"Your Lipidomics Workflow Report","sender_name":"lipidomicstandards.org","sender_address":"info@lipidomicstandards.org","replyto":"","message":"{all_fields}"}},"confirmations":{"1":{"name":"Default Confirmation","type":"message","message":"<p>Thank you for adding this report. Please <a href=\"https:\/\/sandbox.lipidomicstandards.org\/lipidomics-workflow-report\/\">go back<\/a> to the overview page to download your report.<\/p>\r\n<p><script language=\"javascript\">\r\nfunction delete_partial_form(){\r\n    var pairs = location.search.substring(1).split('&');\r\n    var HTTP_GET_VARS = [];\r\n    for (var i = 0; i < pairs.length; i++) {\r\n        var pair = pairs[i].split('=');\r\n        var key = pair[0];\r\n        pair.splice(0, 1);\r\n        var value = pair.join(\"=\");\r\n        HTTP_GET_VARS[key] = value;\r\n    }\r\n    var entry_id = HTTP_GET_VARS[\"wpforms_resume_entry\"];\r\n    var request_url = \"\/lipidomics-report\/connector.php?command=complete_partial_form&form_type=main&entry_id=\" + entry_id;\r\n    var xmlhttp_request = new XMLHttpRequest();\r\n    xmlhttp_request.open(\"GET\", request_url);\r\n    xmlhttp_request.send();\r\n}\r\ndelete_partial_form();\r\n<\/script><\/p>","message_scroll":"1","page":"81","redirect":"","message_entry_preview_style":"basic"}},"form_abandonment":"1","form_abandonment_fields":"all","registration_username":"","registration_email":"","registration_name":"","registration_password":"","registration_website":"","registration_bio":"","registration_role":"subscriber","registration_activation_method":"user","registration_email_user_activation_subject":"{site_name} Activation Required","registration_email_user_activation_message":"IMPORTANT: You must activate your account before you can log in.\r\nPlease visit the link below.\r\n\r\n{url_user_activation}","registration_activation_confirmation":"","registration_hide_message":"Hi {user_first_name}, you\u2019re already logged in. <a href=\"{url_logout}\">Log out<\/a>.","registration_email_admin_subject":"{site_name} New User Registration","registration_email_admin_message":"New user registration on your site {site_name}:\r\n\r\nUsername: {user_registration_login}\r\nEmail: {user_registration_email}","registration_email_user_subject":"{site_name} Your username and password info","registration_email_user_message":"Username: {user_registration_login}\r\nPassword: {user_registration_password}\r\n{url_login}\r\n\r\n","registration_email_user_after_activation_subject":"{site_name} Your account was successfully activated","registration_email_user_after_activation_message":"You can log in with your credentials now.\r\n\r\n{url_login}","save_resume_enable":"1","save_resume_link_text":"Save and Resume","save_resume_disclaimer_message":"Heads up! Saving your progress now will store a copy of your entry on this server and the site owner may have access to it. For security reasons, sensitive information such as credit cards and mailing addresses, along with file uploads will have to be re-entered when you resume.","save_resume_confirmation_message":"Your form entry has been saved and a unique link has been created which you can access to resume this form.\r\n\r\n<a href = \"https:\/\/sandbox.lipidomicstandards.org\/lipidomics-workflow-report\/\">Back to Reports Overview<\/a>\r\n","save_resume_enable_resume_link":"1","save_resume_email_notification_message":"Thank you for saving {form_name}. Click the link below to resume the form from any device.\r\n\r\n{resume_link}\r\n\r\nRemember, the link should not be shared and will expire in 30 days.","save_resume_email_settings_message":"A link to resume this form has been sent to the email address provided.\r\n\r\nPlease remember, the link should not be shared and will expire in 30 days.","form_tags":[]},"meta":{"template":"blank","entry_columns":[6,5,2,-1]}}
